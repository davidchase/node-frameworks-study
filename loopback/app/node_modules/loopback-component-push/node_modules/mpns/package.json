{
  "name": "mpns",
  "description": "A Node.js interface to the Microsoft Push Notification Service (MPNS) for Windows Phone.",
  "version": "2.1.0",
  "author": {
    "name": "Jeff Wilcox",
    "email": "jeffwilcox+github@gmail.com"
  },
  "contributors": [
    {
      "name": "Jeff Wilcox",
      "email": "jeffwilcox+github@gmail.com"
    },
    {
      "name": "Yavor Georgiev"
    }
  ],
  "keywords": [
    "mpns",
    "notifications",
    "wp",
    "windows phone",
    "microsoft",
    "push",
    "push notifications"
  ],
  "repository": {
    "type": "git",
    "url": "git://github.com/jeffwilcox/mpns.git"
  },
  "main": "./lib/mpns.js",
  "engines": {
    "node": ">= 0.5.0"
  },
  "scripts": {
    "test": "mocha -u tdd --reporter spec test/*.js"
  },
  "devDependencies": {
    "should": "*",
    "mocha": "*"
  },
  "readme": "#mpns\n\n[![build status](https://secure.travis-ci.org/jeffwilcox/mpns.png)](http://travis-ci.org/jeffwilcox/mpns)\n\nSend toast and live tile updates to Windows Phones through the Microsoft Push Notification Service (MPNS). Intended for cloud applications powered by Node.js.\n\n## Installation\n\nVia [npm][]:\n\n\t$ npm install mpns\n\t\nAs a submodule of your Git project\n\n\t$ git submodule add http://github.com/jeffwilcox/mpns.git mpns\n\t$ git submodule update --init\n\n## Usage\n### Load in the module\n\n```javascript\nvar mpns = require('mpns');\n```\n\n### Sending a toast\nTo send a toast, simply call the `sendToast` method on mpns.\n\n```javascript\nvar mpns = require('mpns');\nmpns.sendToast(pushUri, 'Bold Text', 'This is normal text');\n\n// Optional callback\nmpns.sendToast(pushUri, text1, text2, callback);\n```\n\nEach of the methods that send tile and toast notifications have two alternative parameter signatures:\n\n```\nsend*(pushUri, [options], [callback]) \nsend*(pushUri, string1, string2, ..., [callback])\n```\n\nThe ordering of the parameters in the non-object calling method assumes ordering as documented in the toast or tile-specific sections below.\n\nFor toasts, the properties and ordering for them:\n\n* `text1` the text of the toast, this first text will appear bold on the phone\n* `text2` additional toast text, will appear in the normal font. It does not wrap.\n* `param` optional URI parameter within your application specifying the XAML page to open within the app, along with any query string parameters for the page's context\n\n### Sending a live tile update\nTo send a tile update, call the `sendTile` method on mpns.\n\nIt is recommended that you use the options syntax for this call as it is possible for the live tile update to include just one component in the update, say the tile count, and not update other properties. To clear the value of a property, simply pass `null` as the value.\n\nThe option names or ordering for parameters is:\n\n* `backgroundImage` URI to the background image for the tile. Beware that the URI may be restricted to the whitelisted domain names that you provided in your application.\n* `count` the number to appear in the tile\n* `title` the title of the tile\n* `backBackgroundImage` URI to the image to be on the flip side of the tile\n* `backTitle` optional title for the back tile\n* `backContent` optional content for the back tile (appears in a larger font size)\n* `id` optional ID for a secodary tile\n\nSome devices support an enhanced tile format called a \"flip tile\", which supports some additional parameters. This kind of tile can be sent using the `sendFlipTile` method, which supports *all of the above* parameters as well as:\n* `smallBackgroundImage` URI to the background image for the tile when it is shrunk to small size\n* `wideBackgroundImage` URI to the background image for the tile when it is expanded to wide size\n* `wideBackContent` content for the back tile (appears in a larger font size) when the tile is expanded to wide size\n* `wideBackBackgroundImage` URI to the image to be on the flip side of the tile when the tile is expanded to wide size\n\nAnother format is called \"iconic tile\". This can be sent using `sendIconicTile` method with the following parameters:\n* `backgroundColor` hexadecimal color code in format ARGB\n* `count` the number that apper on the right of an icon\n* `title` the title of the tile\n* `iconImage` URI of the normal icon\n* `smallIconImage` URI of the icon for small tile\n* `wideContent1` top line of text shown in a wide tile\n* `wideContent2` second line of text\n* `wideContent3` third line of text\n\n### Sending a raw notification\nWhen creating the notification object, either provide the raw payload first, or as the `options.payload` property.\n\n```javascript\nvar raw = new mpns.rawNotification('My Raw Payload', options);\n```\n\nToday the type on the request is set to UTF8 explicitly.\n\n### Using authenticated channels (MTLS)\nYou may use authenticated channels for the push notifications. Further information can be found here:http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff941099(v=vs.105).aspx\n\nAuthenticated channels require a TLS client certificate for client authentication against the MPNS server.\nThe TLS certificate is registered in your Microsoft Phone Development Dashboard.\nThe CN of the certificate is used in the APP as Service Name in the HttpNotificationChannel constructor.\n\nTo use authentication you must provide the client certificate (including the private key) to the options of the send* functions.\nThe client certificate is used when the pushURI is a https URI.\n\nThe following options from tls.connect() can be specified:\n\n* `pfx` Certificate, Private key and CA certificates to use for SSL. Default null.\n* `key` Private key to use for SSL. Default null.\n* `passphrase`  A string of passphrase for the private key or pfx. Default null.\n* `cert` Public x509 certificate to use. Default null.\n* `ca` An authority certificate or array of authority certificates to check the remote host against.\n* `ciphers` A string describing the ciphers to use or exclude.\n* `rejectUnauthorized` If true, the server certificate is verified against the list of supplied CAs. An 'error' event is emitted if verification fails. Verification happens at the connection level, before the HTTP request is sent. Default true.\n\n```javascript\nvar options = { \n\ttext1: 'Hello!',\n\ttext2: 'Great to see you today.'\n\tcert: fs.readFileSync('mycert.pem'),\n\tkey: fs.readFileSync('mycertkey.pem')\n\t};\n\nmpns.sendToast(httpspushUri, options, callback);\n```\n\n### HTTP proxy support\n\nIf the options passed into a tile or push call include a `proxy` value, the proxy server information will be used. The string value should be the URI to the proxy, including host, for example: `{ proxy: 'http://yourproxy:8080'}`.\n\n### Results object information\nA results object is passed back through the callback and has important information from MPNS.\n\n- `deviceConnectionStatus`: The device status as reported by the service.\n- `notificationStatus`: The status of your provided notification.\n- `subscriptionStatus`: The status of the subscription URI.\n\nThe object will also contain all the key fields for your toast or live tile update, plus the pushType. This makes it easy to store this information in a history log somewhere in the ether.\n\n### Handling Errors\nIt is very important as a consumer that you store appropriate actionable data about failed push notification attempts. As a result, the callback's first parameter (err) is set to the standard results object as well as a few additional fields depending on the returned status code from the server.\n\nRemember to take action on that information in order to be a good MPNS citizen. These values may be set in the error object and of interest to you:\n\n- `minutesToDelay`: If this is present, it is the suggested minimum amount of time that you should wait until making another request to the same subscription URI. For HTTP 412s, for example, the minimum time is one hour and so the returned value defaults to 61.\n- `shouldDeleteChannel`: If this is set to `true`, the channel is gone according to MPNS. Delete it from your channel/subscription database and never look back.\n- `innerError`: If an error is captured while trying to make the HTTP request, this will be set to that error callback instance.\n\n### A note about different Windows Phone versions\nThis module permits sending toasts and tiles supported only on specific versions of Windows Phone. If you use those features on a version where they are unsupported, unfortunately notifications may not be received, or will error out the subscription.\n\nTake care when registering your subscription channels with your cloud service to include the application platform version of the app (7.1 for Mango apps). To rock, maybe also grab the OS version and deployed app version. That information can be helpful when supporting customers.\n\nHere is a list of features that are only supported in given versions of Windows Phone:\n* For Windows Phone 7.0\n\t* Do not use the `param` or other fields as indicated below and it should work OK.\n* Only supported in Windows Phone 7.5+ (Mango/WP 7.1 OS)\n    * Including the `param` field when sending a push\n    * Including the `id` parameter when sending a tile\n* Only supported in Windows Phone 7.8+ (including Windows Phone 8)\n    * Sending \"flip\" tiles\n\n## Credits\n\nNPM module written and maintained by [Jeff Wilcox] with contributions from:\n\n- Jeff Wilcox : https://github.com/jeffwilcox\n- Shawn Burke : https://github.com/shawnburke\n- Jeremie Pelletier : https://github.com/ddude\n- Yavor Georgiev: https://github.com/yavorg\n- Stephan Eckbauer: https://github.com/ste99\n\n## License\n\nCopyright Jeff Wilcox\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n[Jeff Wilcox]: http://www.jeff.wilcox.name\n[npm]: http://github.com/isaacs/npm\n\n## Changelog\n\nThe changelog has moved over time.\n\n* 1.2.8 and newer: The GitHub releases feature provides this information at https://github.com/jeffwilcox/mpns/releases\n* 0-1.2.8: Available in the [CHANGELOG.md](https://github.com/jeffwilcox/mpns/blob/master/CHANGELOG.md) markdown file\n\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/jeffwilcox/mpns/issues"
  },
  "_id": "mpns@2.1.0",
  "dist": {
    "shasum": "c0b973d172655730eab22e113f9939165a686779",
    "tarball": "http://registry.npmjs.org/mpns/-/mpns-2.1.0.tgz"
  },
  "_from": "mpns@~2.1.0",
  "_npmVersion": "1.3.8",
  "_npmUser": {
    "name": "jeffwilcox",
    "email": "jeffwilcox@gmail.com"
  },
  "maintainers": [
    {
      "name": "jeffwilcox",
      "email": "jeffwilcox@gmail.com"
    }
  ],
  "directories": {},
  "_shasum": "c0b973d172655730eab22e113f9939165a686779",
  "_resolved": "https://registry.npmjs.org/mpns/-/mpns-2.1.0.tgz",
  "homepage": "https://github.com/jeffwilcox/mpns"
}
